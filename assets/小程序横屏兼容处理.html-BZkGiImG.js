import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as n,o as e}from"./app-DDDF--fm.js";const t={};function l(h,i){return e(),a("div",null,i[0]||(i[0]=[n(`<h2 id="背景" tabindex="-1"><a class="header-anchor" href="#背景"><span>背景</span></a></h2><p>在h5开发中可用的css适配单位有 em/百分比/rem/vw/vh/vmin/vmax，小程序提供了 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html" target="_blank" rel="noopener noreferrer">rpx</a>: 可以根据屏幕宽度进行自适应，规定屏幕宽为750rpx。</p><p>日常小程序开发中，一般设计图尺寸为 750 * 1334 px，则在小程序中一般 1px 直接写为 1rpx ，当小程序为竖屏（<code>&quot;pageOrientation&quot;: &quot;portrait&quot;</code> 默认为竖屏）时，根据 rpx 可以直接还原UI图，但是当小程序为横屏（<code>&quot;pageOrientation&quot;: &quot;landscape&quot;</code>）时，根据 rpx 适配就明显比较大，不符合UI图，因为 rpx 是根据屏幕宽度适配的。</p><p>这个时候就需要一种既能适配不同屏幕大小，又能以设计图为准，快速布局的方式。通过了解 em/百分比/rem/vw/vh/vmin/vmax 这几种方式，明显 vmin 更符合，vmin 是vw和vh中比较 <strong>小</strong> 的值。</p><p>vw： Viewport宽度， <strong>1vw</strong> 等于viewport宽度的 1%。<br> vh： Viewport高度， <strong>1vh</strong> 等于viewport高的的 1%。</p><p>所以 100 vmin = 750px。</p><h2 id="wxss-文件处理" tabindex="-1"><a class="header-anchor" href="#wxss-文件处理"><span><code>.wxss</code> 文件处理</span></a></h2><p>当设置某个元素的宽度为 100px 时，根据 <code>100px / 750px = x / 100vmin</code> ，则对应的 vmin 值为 100vmin / 7.5 ，当单位为 rpx 时， vmin 值为 100vmin / 7.5 ，即</p><p><code>100px = 100vmin / 7.5</code> 或者 <code>100rpx = 100vmin / 7.5</code> ，但是每次都写 <code>vmin / 7.5</code> 又有点麻烦，所以就写了个小工具 <a href="https://github.com/fxss5201/rpx2vmin" target="_blank" rel="noopener noreferrer">rpx2vmin</a> ，支持将 rpx/px 转译为 vmin，这样布局的时候依然写 rpx/px ，最后再转译一下就可以了。</p><p>将需要转译的 <code>.wxss</code> 文件复制粘贴到 <code>input</code> 文件下，在项目目录下执行如下命令行 ，会在 <code>ouput</code> 目录下生成对应的文件名称，需要提前安装 <a href="http://nodejs.cn/" target="_blank" rel="noopener noreferrer">nodejs</a>。</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 安装依赖</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 将 rpx 转译为 vmin</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rpx2vmin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 将 px 转译为 vmin</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> px2vmin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>主要处理的如下：</p><div class="language-css line-numbers-mode" data-highlighter="shiki" data-ext="css" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">font-size</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">: 12rpx;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">height: 60rpx;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">padding: 12rpx 16rpx;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">border-left</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">: 2rpx dashed </span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">#5DA5FF</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">width: calc(100vw - 50rpx - 80rpx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>转移为</p><div class="language-css line-numbers-mode" data-highlighter="shiki" data-ext="css" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">font-size</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">: calc(12vmin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">height: calc(60vmin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">padding: calc(12vmin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">calc(16vmin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">border-left</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">: calc(2vmin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">dashed </span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">#5DA5FF</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">width: calc(100vw - 50vmin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">.5</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> - 80vmin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者是：</p><div class="language-css line-numbers-mode" data-highlighter="shiki" data-ext="css" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">font-size</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">: 12px;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">height: 60px;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">padding: 12px 16px;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">border-left</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">: 2px dashed </span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">#5DA5FF</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">width: calc(100vw - 50px - 80px</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>转移为</p><div class="language-css line-numbers-mode" data-highlighter="shiki" data-ext="css" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">font-size</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">: calc(12vmin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">height: calc(60vmin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">padding: calc(12vmin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">calc(16vmin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">border-left</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">: calc(2vmin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">dashed </span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">#5DA5FF</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">width: calc(100vw - 50vmin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">.5</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> - 80vmin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / 7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="js-中的处理" tabindex="-1"><a class="header-anchor" href="#js-中的处理"><span>js 中的处理</span></a></h2><p>某些时候我们可能需要通过 js 计算设置，这个时候可以通过 <a href="https://developers.weixin.qq.com/miniprogram/dev/api/base/system/wx.getSystemInfo.html" target="_blank" rel="noopener noreferrer">wx.getSystemInfo()</a> 得到 <code>windowWidth</code>（可使用窗口宽度，单位px） 和 <code>windowHeight</code>（可使用窗口高度，单位px） ， <code>100vmin = Math.min(windowWidth, windowHeight)</code>， <code>1px = Math.min(windowWidth, windowHeight) / 750</code> ，其中750为布局的时候可视窗口的最小宽度，其他尺寸乘以比例即可得到对应的 px 值或者 rpx 值。</p>`,21)]))}const k=s(t,[["render",l]]),d=JSON.parse('{"path":"/mini/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A8%AA%E5%B1%8F%E5%85%BC%E5%AE%B9%E5%A4%84%E7%90%86.html","title":"小程序横屏兼容处理","lang":"zh-CN","frontmatter":{"title":"小程序横屏兼容处理","isOriginal":true,"category":["小程序"],"tag":["横屏"],"date":"2022-04-11T00:00:00.000Z","description":"背景 在h5开发中可用的css适配单位有 em/百分比/rem/vw/vh/vmin/vmax，小程序提供了 rpx: 可以根据屏幕宽度进行自适应，规定屏幕宽为750rpx。 日常小程序开发中，一般设计图尺寸为 750 * 1334 px，则在小程序中一般 1px 直接写为 1rpx ，当小程序为竖屏（\\"pageOrientation\\": \\"portr...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"小程序横屏兼容处理\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-04-11T00:00:00.000Z\\",\\"dateModified\\":\\"2022-11-10T15:01:24.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"fxss\\",\\"url\\":\\"https://github.com/fxss5201\\"}]}"],["meta",{"property":"og:url","content":"https://blog.fxss.work/fxss-blog/mini/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A8%AA%E5%B1%8F%E5%85%BC%E5%AE%B9%E5%A4%84%E7%90%86.html"}],["meta",{"property":"og:site_name","content":"fxss 个人博客"}],["meta",{"property":"og:title","content":"小程序横屏兼容处理"}],["meta",{"property":"og:description","content":"背景 在h5开发中可用的css适配单位有 em/百分比/rem/vw/vh/vmin/vmax，小程序提供了 rpx: 可以根据屏幕宽度进行自适应，规定屏幕宽为750rpx。 日常小程序开发中，一般设计图尺寸为 750 * 1334 px，则在小程序中一般 1px 直接写为 1rpx ，当小程序为竖屏（\\"pageOrientation\\": \\"portr..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2022-11-10T15:01:24.000Z"}],["meta",{"property":"article:tag","content":"横屏"}],["meta",{"property":"article:published_time","content":"2022-04-11T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2022-11-10T15:01:24.000Z"}]]},"git":{"createdTime":1668092484000,"updatedTime":1668092484000,"contributors":[{"name":"fxss","username":"fxss","email":"723107234@qq.com","commits":1,"url":"https://github.com/fxss"}]},"readingTime":{"minutes":2.33,"words":699},"filePathRelative":"mini/小程序横屏兼容处理.md","excerpt":"<h2>背景</h2>\\n<p>在h5开发中可用的css适配单位有 em/百分比/rem/vw/vh/vmin/vmax，小程序提供了 <a href=\\"https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">rpx</a>: 可以根据屏幕宽度进行自适应，规定屏幕宽为750rpx。</p>\\n<p>日常小程序开发中，一般设计图尺寸为 750 * 1334 px，则在小程序中一般 1px 直接写为 1rpx ，当小程序为竖屏（<code>\\"pageOrientation\\": \\"portrait\\"</code> 默认为竖屏）时，根据 rpx 可以直接还原UI图，但是当小程序为横屏（<code>\\"pageOrientation\\": \\"landscape\\"</code>）时，根据 rpx 适配就明显比较大，不符合UI图，因为 rpx 是根据屏幕宽度适配的。</p>","autoDesc":true}');export{k as comp,d as data};
