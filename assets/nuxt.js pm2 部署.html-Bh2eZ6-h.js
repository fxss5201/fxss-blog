import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,a as n,o as e}from"./app-DTBEDLR8.js";const a={};function l(p,i){return e(),t("div",null,i[0]||(i[0]=[n(`<p>对于 nuxt 项目，一般采用官方提供的 <a href="https://github.com/nuxt/create-nuxt-app" target="_blank" rel="noopener noreferrer">create-nuxt-app</a> 脚手架，具体过程 <a href="https://zh.nuxtjs.org/guide/installation/" target="_blank" rel="noopener noreferrer">https://zh.nuxtjs.org/guide/installation/</a> 。</p><ol><li>在实际开发中一般使用 <code>npm run dev</code> 其本地服务进行开发</li><li>发布部署的时候首先需要 <code>npm run build</code> （相当于 <code>nuxt build</code> ） 利用webpack编译应用，压缩JS和CSS资源</li><li>之后将文件上传到指定的服务器</li><li>需要 <code>npm run start</code> （相当于 <code>cross-env NODE_ENV=production node server/index.js</code> ）</li></ol><p>对第4步进行说明，如果使用了 Koa/Express 等 Node.js Web 开发框架，并使用了 Nuxt 作为中间件，可以自定义 Web 服务器的启动入口：</p><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td><code>NODE_ENV=development nodemon server/index.js</code></td><td>启动一个热加载的自定义 Web 服务器（开发模式）。</td></tr><tr><td><code>NODE_ENV=production node server/index.js</code></td><td>以生产模式启动一个自定义 Web 服务器 (需要先执行 nuxt build)。</td></tr></tbody></table><p>至于 <a href="https://www.npmjs.com/package/cross-env" target="_blank" rel="noopener noreferrer">cross-env</a> 是运行跨平台设置和使用环境变量的脚本。</p><p>当我们以对应服务启动生产模式的 nuxt 项目的时候，可以正常访问（我这里都是采用 nginx 配置的代理），但是当我们关闭命令行窗口的时候，服务也就关闭了，所以这个时候我们需要使用 pm2 。</p><p>使用 pm2 启动 nuxt 项目：</p><ol><li>先到服务器项目的根目录下</li><li><code>pm2 start npm --name &quot;name&quot; -- run start</code></li></ol><p>对第2步进行说明，这里设置的 name 之后可以在 <code>pm2 list</code> 进行查看，并且之后可以通过 <code>pm2 start name</code> 或 <code>pm2 stop name</code> 对服务进行开关。</p><p>pm2 常用的命令行：</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看当前正在运行的进程</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pm2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> list</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 启动所有应用</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pm2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">all</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 重启所有应用</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pm2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">all</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 停止所有的应用程序</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pm2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">all</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 关闭并删除所有应用</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pm2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> delete</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">all</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 控制台显示所有日志</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pm2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logs</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 控制台显示指定编号的日志</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pm2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> id</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pm2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> show</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 显示每个应用程序的CPU和内存占用情况</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pm2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> monit</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11)]))}const d=s(a,[["render",l]]),k=JSON.parse('{"path":"/vue/nuxt.js%20pm2%20%E9%83%A8%E7%BD%B2.html","title":"nuxt.js pm2 部署","lang":"zh-CN","frontmatter":{"title":"nuxt.js pm2 部署","isOriginal":true,"category":["Vue"],"tag":["Nuxt"],"date":"2020-04-06T00:00:00.000Z","description":"对于 nuxt 项目，一般采用官方提供的 create-nuxt-app 脚手架，具体过程 https://zh.nuxtjs.org/guide/installation/ 。 在实际开发中一般使用 npm run dev 其本地服务进行开发 发布部署的时候首先需要 npm run build （相当于 nuxt build ） 利用webpack编...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"nuxt.js pm2 部署\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2020-04-06T00:00:00.000Z\\",\\"dateModified\\":\\"2024-07-07T13:03:21.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"fxss\\",\\"url\\":\\"https://github.com/fxss5201\\"}]}"],["meta",{"property":"og:url","content":"https://blog.fxss.work/fxss-blog/vue/nuxt.js%20pm2%20%E9%83%A8%E7%BD%B2.html"}],["meta",{"property":"og:site_name","content":"fxss 个人博客"}],["meta",{"property":"og:title","content":"nuxt.js pm2 部署"}],["meta",{"property":"og:description","content":"对于 nuxt 项目，一般采用官方提供的 create-nuxt-app 脚手架，具体过程 https://zh.nuxtjs.org/guide/installation/ 。 在实际开发中一般使用 npm run dev 其本地服务进行开发 发布部署的时候首先需要 npm run build （相当于 nuxt build ） 利用webpack编..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-07T13:03:21.000Z"}],["meta",{"property":"article:tag","content":"Nuxt"}],["meta",{"property":"article:published_time","content":"2020-04-06T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-07T13:03:21.000Z"}]]},"git":{"createdTime":1668325589000,"updatedTime":1720357401000,"contributors":[{"name":"fxss","username":"fxss","email":"723107234@qq.com","commits":3,"url":"https://github.com/fxss"}]},"readingTime":{"minutes":1.77,"words":531},"filePathRelative":"vue/nuxt.js pm2 部署.md","excerpt":"<p>对于 nuxt 项目，一般采用官方提供的 <a href=\\"https://github.com/nuxt/create-nuxt-app\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">create-nuxt-app</a> 脚手架，具体过程 <a href=\\"https://zh.nuxtjs.org/guide/installation/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://zh.nuxtjs.org/guide/installation/</a> 。</p>\\n<ol>\\n<li>在实际开发中一般使用 <code>npm run dev</code> 其本地服务进行开发</li>\\n<li>发布部署的时候首先需要 <code>npm run build</code> （相当于 <code>nuxt build</code> ） 利用webpack编译应用，压缩JS和CSS资源</li>\\n<li>之后将文件上传到指定的服务器</li>\\n<li>需要 <code>npm run start</code> （相当于 <code>cross-env NODE_ENV=production node server/index.js</code> ）</li>\\n</ol>","autoDesc":true}');export{d as comp,k as data};
